/*!
 * TOAST UI Editor : Text Highlight Plugin
 * @version 1.0.0 | Fri Jul 04 2025
 * @author undefined
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("tui-color-picker")):"function"==typeof define&&define.amd?define(["tui-color-picker"],e):"object"==typeof exports?exports.toastui=e(require("tui-color-picker")):(t.toastui=t.toastui||{},t.toastui.Editor=t.toastui.Editor||{},t.toastui.Editor.plugin=t.toastui.Editor.plugin||{},t.toastui.Editor.plugin.highlightSyntax=e(t.tui.colorPicker))}(self,function(t){return function(){"use strict";var e={262:function(e){e.exports=t}},o={};function r(t){var n=o[t];if(void 0!==n)return n.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,r),i.exports}r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var n={};r.d(n,{default:function(){return h}});var i=r(262);function a(t,e){return t.classList.contains(e)}const s="toastui-editor-";function g(t,e){if(!t)return e;const o=t.split(";").filter(t=>t.trim()).reduce((t,e)=>{const[o,r]=e.split(":").map(t=>t.trim());return o&&r&&(t[o]=r),t},{}),[r,n]=e.split(":").map(t=>t.trim());return r&&n&&(o[r]=n),Object.entries(o).map(([t,e])=>`${t}: ${e}`).join("; ")}function l(t,e){return function(t,e){let o=t;for(;o&&!a(o,e);)o=o.parentElement;return o}(t,`${s}defaultUI`).querySelector(`.${e} .ProseMirror`)}let c,u;function h(t,e={}){const{eventEmitter:o,i18n:r,usageStatistics:n=!0,pmState:a}=t,{preset:h}=e,p=document.createElement("div"),d={container:p,usageStatistics:n};!function(t){t.setLanguage("ar",{"Highlight color":"لون التمييز"}),t.setLanguage(["cs","cs-CZ"],{"Highlight color":"Barva zvýraznění"}),t.setLanguage(["de","de-DE"],{"Highlight color":"Hervorhebungsfarbe"}),t.setLanguage(["en","en-US"],{"Highlight color":"Highlight color"}),t.setLanguage(["es","es-ES"],{"Highlight color":"Color de resaltado"}),t.setLanguage(["fi","fi-FI"],{"Highlight color":"Korostusväri"}),t.setLanguage(["fr","fr-FR"],{"Highlight color":"Couleur de surlignage"}),t.setLanguage(["gl","gl-ES"],{"Highlight color":"Cor de realce"}),t.setLanguage(["hr","hr-HR"],{"Highlight color":"Boja isticanja"}),t.setLanguage(["it","it-IT"],{"Highlight color":"Colore di evidenziazione"}),t.setLanguage(["ja","ja-JP"],{"Highlight color":"ハイライト色"}),t.setLanguage(["ko","ko-KR"],{"Highlight color":"하이라이트 색상"}),t.setLanguage(["nb","nb-NO"],{"Highlight color":"Uthevingsfarge"}),t.setLanguage(["nl","nl-NL"],{"Highlight color":"Markeringskleur"}),t.setLanguage(["pl","pl-PL"],{"Highlight color":"Kolor podświetlenia"}),t.setLanguage(["pt","pt-BR"],{"Highlight color":"Cor de destaque"}),t.setLanguage(["ru","ru-RU"],{"Highlight color":"Цвет выделения"}),t.setLanguage(["sv","sv-SE"],{"Highlight color":"Markeringsfärg"}),t.setLanguage(["tr","tr-TR"],{"Highlight color":"Vurgulama rengi"}),t.setLanguage(["uk","uk-UA"],{"Highlight color":"Колір виділення"}),t.setLanguage("zh-CN",{"Highlight color":"高亮颜色"}),t.setLanguage("zh-TW",{"Highlight color":"螢光標示顏色"})}(r),h&&(d.preset=h);const m=i.create(d),f=function(t){const e=document.createElement("button");return e.setAttribute("type","button"),e.textContent=t,e}(r.get("OK"));o.listen("focus",t=>{c=`${s}${"markdown"===t?"md":"ww"}-container`}),p.addEventListener("click",t=>{if("button"===t.target.getAttribute("type")){const t=m.getColor();u=l(p,c),o.emit("command","highlight",{selectedColor:t}),o.emit("closePopup"),u.focus()}}),m.slider.toggle(!0),p.appendChild(f);const H=function(t,e){return{name:"highlight",tooltip:e.get("Highlight color"),className:`${s}toolbar-icons highlight`,popup:{className:`${s}popup-highlight`,body:t,style:{width:"auto"}}}}(p,r);return{markdownCommands:{highlight:({selectedColor:t},{tr:e,selection:o,schema:r},n)=>{if(t){const i=o.content(),s=i.content.textBetween(0,i.content.size,"\n"),l=s.match(/<span[^>]*style="([^"]*)"[^>]*>(.*?)<\/span>/);let c,u,h;if(l){const e=l[1],o=l[2];c=`<span style="${g(e,`background-color: ${t}`)}">`,u="</span>",h=o}else c=`<span style="background-color: ${t}">`,u="</span>",h=s;const p=`${c}${h}${u}`;return e.replaceSelectionWith(r.text(p)).setSelection(function(t,e,o,r,n){const{mapping:i,doc:a}=t,{from:s,to:g,empty:l}=e,c=i.map(s)+r.length,u=i.map(g)-n.length;return l?o.create(a,u,u):o.create(a,c,u)}(e,o,a.TextSelection,c,u)),n(e),!0}return!1}},wysiwygCommands:{highlight:({selectedColor:t},{tr:e,selection:o,schema:r},n)=>{if(t){const{from:i,to:a}=o,s=e.doc;let l="";s.nodesBetween(i,a,(t,e)=>{if(t.marks){const e=t.marks.find(t=>"span"===t.type.name);e&&e.attrs.htmlAttrs&&e.attrs.htmlAttrs.style&&(l=e.attrs.htmlAttrs.style)}});const c={htmlAttrs:{style:g(l,`background-color: ${t}`)}},u=r.marks.span.create(c);return e.removeMark(i,a,r.marks.span),e.addMark(i,a,u),n(e),!0}return!1}},toolbarItems:[{groupIndex:0,itemIndex:3,item:H}],toHTMLRenderers:{htmlInline:{span(t,{entering:e}){return e?{type:"openTag",tagName:"span",attributes:t.attrs}:{type:"closeTag",tagName:"span"}}}}}}return n=n.default}()});